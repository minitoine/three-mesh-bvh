let e,t,i;function r(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}var s=globalThis,o={},n={},a=s.parcelRequire4485;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return o[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},s.parcelRequire4485=a);var l=a.register;l("4h5hN",function(e,t){r(e.exports,"acceleratedRaycast",()=>h),r(e.exports,"computeBoundsTree",()=>p),r(e.exports,"disposeBoundsTree",()=>c);var i=a("ilwiq"),s=a("b4YKL"),o=a("ff8ed");let n=new i.Ray,l=new i.Matrix4,d=i.Mesh.prototype.raycast;function h(e,t){if(this.geometry.boundsTree){if(void 0===this.material)return;l.copy(this.matrixWorld).invert(),n.copy(e.ray).applyMatrix4(l);let i=this.geometry.boundsTree;if(!0===e.firstHitOnly){let r=(0,s.convertRaycastIntersect)(i.raycastFirst(n,this.material),this,e);r&&t.push(r)}else{let r=i.raycast(n,this.material);for(let i=0,o=r.length;i<o;i++){let o=(0,s.convertRaycastIntersect)(r[i],this,e);o&&t.push(o)}}}else d.call(this,e,t)}function p(e){return this.boundsTree=new o.MeshBVH(this,e),this.boundsTree}function c(){this.boundsTree=null}}),l("b4YKL",function(e,t){r(e.exports,"convertRaycastIntersect",()=>i);function i(e,t,i){return null===e?null:(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(i.ray.origin),e.object=t,e.distance<i.near||e.distance>i.far)?null:e}}),l("5ca9G",function(e,t){r(e.exports,"MeshBVHHelper",()=>d);var i=a("ilwiq"),s=a("aw71y"),o=a("ff8ed");let n=new i.Box3;class l extends i.Object3D{get isMesh(){return!this.displayEdges}get isLineSegments(){return this.displayEdges}get isLine(){return this.displayEdges}constructor(e,t,r=10,s=0){super(),this.material=t,this.geometry=new i.BufferGeometry,this.name="MeshBVHRootHelper",this.depth=r,this.displayParents=!1,this.bvh=e,this.displayEdges=!0,this._group=s}raycast(){}update(){let e=this.geometry,t=this.bvh,r=this._group;if(e.dispose(),this.visible=!1,t){let o,a;let l=this.depth-1,d=this.displayParents,h=0;t.traverse((e,t)=>{if(e>=l||t)return h++,!0;d&&h++},r);let p=0,c=new Float32Array(24*h);t.traverse((e,t,i)=>{let r=e>=l||t;if(r||d){(0,s.arrayToBox)(0,i,n);let{min:e,max:t}=n;for(let i=-1;i<=1;i+=2){let r=i<0?e.x:t.x;for(let i=-1;i<=1;i+=2){let s=i<0?e.y:t.y;for(let i=-1;i<=1;i+=2){let o=i<0?e.z:t.z;c[p+0]=r,c[p+1]=s,c[p+2]=o,p+=3}}}return r}},r),a=new Uint8Array(this.displayEdges?[0,4,1,5,2,6,3,7,0,2,1,3,4,6,5,7,0,1,2,3,4,5,6,7]:[0,1,2,2,1,3,4,6,5,6,7,5,1,4,5,0,4,1,2,3,6,3,7,6,0,2,4,2,6,4,1,5,3,3,5,7]),o=c.length>65535?new Uint32Array(a.length*h):new Uint16Array(a.length*h);let u=a.length;for(let e=0;e<h;e++){let t=8*e,i=e*u;for(let e=0;e<u;e++)o[i+e]=t+a[e]}e.setIndex(new i.BufferAttribute(o,1,!1)),e.setAttribute("position",new i.BufferAttribute(c,3,!1)),this.visible=!0}}}class d extends i.Group{get color(){return this.edgeMaterial.color}get opacity(){return this.edgeMaterial.opacity}set opacity(e){this.edgeMaterial.opacity=e,this.meshMaterial.opacity=e}constructor(e=null,t=null,r=10){e instanceof o.MeshBVH&&(r=t||10,t=e,e=null),"number"==typeof t&&(r=t,t=null),super(),this.name="MeshBVHHelper",this.depth=r,this.mesh=e,this.bvh=t,this.displayParents=!1,this.displayEdges=!0,this._roots=[];let s=new i.LineBasicMaterial({color:65416,transparent:!0,opacity:.3,depthWrite:!1}),n=new i.MeshBasicMaterial({color:65416,transparent:!0,opacity:.3,depthWrite:!1});n.color=s.color,this.edgeMaterial=s,this.meshMaterial=n,this.update()}update(){let e=this.bvh||this.mesh.geometry.boundsTree,t=e?e._roots.length:0;for(;this._roots.length>t;){let e=this._roots.pop();e.geometry.dispose(),this.remove(e)}for(let i=0;i<t;i++){let{depth:t,edgeMaterial:r,meshMaterial:s,displayParents:o,displayEdges:n}=this;if(i>=this._roots.length){let s=new l(e,r,t,i);this.add(s),this._roots.push(s)}let a=this._roots[i];a.bvh=e,a.depth=t,a.displayParents=o,a.displayEdges=n,a.material=n?r:s,a.update()}}updateMatrixWorld(...e){let t=this.mesh,i=this.parent;null!==t&&(t.updateWorldMatrix(!0,!1),i?this.matrix.copy(i.matrixWorld).invert().multiply(t.matrixWorld):this.matrix.copy(t.matrixWorld),this.matrix.decompose(this.position,this.quaternion,this.scale)),super.updateMatrixWorld(...e)}copy(e){this.depth=e.depth,this.mesh=e.mesh,this.bvh=e.bvh,this.opacity=e.opacity,this.color.copy(e.color)}clone(){return new d(this.mesh,this.bvh,this.depth)}dispose(){this.edgeMaterial.dispose(),this.meshMaterial.dispose();let e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].geometry.dispose()}}});var d=a("ilwiq"),h=a("5Rd1x"),p=a("4h5hN"),c=a("Mleu6"),u=a("5ca9G");d.Mesh.prototype.raycast=p.acceleratedRaycast,d.BufferGeometry.prototype.computeBoundsTree=p.computeBoundsTree,d.BufferGeometry.prototype.disposeBoundsTree=p.disposeBoundsTree;let y=[],m=null;function f(){if(null===m)throw Error();return(m=(1103515245*m+12345)%2e31)/2e31}(function(){(e=new d.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.setClearColor(1118481,1),e.outputEncoding=d.sRGBEncoding,document.body.appendChild(e.domElement),i=new d.Scene;let r=new d.DirectionalLight(16777215,1);r.position.set(1,1,1),i.add(r),i.add(new d.AmbientLight(11583173,.8)),(t=new d.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,50)).position.set(0,0,4),t.far=100,t.updateProjectionMatrix(),new h.OrbitControls(t,e.domElement);let s={strategy:c.AVERAGE,packData:!1,maxDepth:1},o=new d.TorusGeometry(1,1,40,10);o.computeBoundsTree(s),m=7830035629,f();for(var n=0;n<10;n++){let e=new d.Mesh(o,new d.MeshStandardMaterial);if(e.rotation.x=10*f(),e.rotation.y=10*f(),e.rotation.z=10*f(),e.position.x=f(),e.position.y=f(),e.position.z=f(),2===n){y.push(e),i.add(e);let t=e.clone();t.material=new d.MeshBasicMaterial({wireframe:!0,color:16737894}),i.add(t);let r=new u.MeshBVHHelper(e,10);i.add(r)}e.updateMatrix(!0),e.updateMatrixWorld(!0)}m=4697211981,f();let a=new d.Raycaster;a.firstHitOnly=!1,a.ray.origin.set(10*f(),10*f(),10*f()),a.ray.direction.copy(a.ray.origin).multiplyScalar(-1).normalize();let l=new d.SphereGeometry(.1),p=new d.Mesh(l);p.position.copy(a.ray.at(0,new d.Vector3)),i.add(p);let w=a.intersectObjects(y,!0);a.firstHitOnly=!0;let g=a.intersectObjects(y,!0);o.boundsTree=null;let x=a.intersectObjects(y,!0);console.log("FIRST HIT",g),console.log("BVH HITS",w),console.log("OG HITS",x);let M=p.clone();M.position.copy(g[0].point),i.add(M);let b=p.clone();b.position.copy(w[0].point),i.add(b);let v=new d.Line;v.geometry.setFromPoints([a.ray.at(0,new d.Vector3),a.ray.at(20,new d.Vector3)]),i.add(v),window.addEventListener("resize",function(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)},!1)})(),function r(){requestAnimationFrame(r),e.render(i,t)}();
//# sourceMappingURL=randomSampleDebug.1b0b34db.js.map
